<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-09-05 Tue 00:49 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="author" content="Jeet Ray" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://combinatronics.io/sylvorg/bundle/main/src/styles/primary/syvl.css" />
<link rel="icon" href="https://combinatronics.io/sylvorg/bundle/main/src/icons/favicons/shiny-zigzagoon-galar.ico" sizes="any" />
<link rel="icon" href="https://combinatronics.io/sylvorg/bundle/main/src/icons/favicons/shiny-zigzagoon-galar.svg" />
<link rel="manifest" href="https://combinatronics.io/sylvorg/bundle/main/manifest.json" />
<link rel="stylesheet" type="text/css" href="https://combinatronics.io/sylvorg/bundle/main/src/styles/highlight/paraiso-dark.min.css" />
<script src="https://combinatronics.io/sylvorg/bundle/main/src/scripts/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<div class="header">
<h1>We Are Syvlorg.</h1>
<a href="">About Me</a>
<a href="">About This Website</a>
<a href="">About Syvlorg</a>
<a href="https://resume.syvl.org">Résumé</a>
<a href="https://index.syvl.org">Index</a>
</div>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgbd2166a">meq.el</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgbd2166a" class="outline-2">
<h2 id="orgbd2166a">meq.el</h2>
<div class="outline-text-2" id="text-orgbd2166a">
<div class="org-src-container">
<pre><code class="language-lisp match-braces rainbow-braces"><span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">meq.el --- a simple package                     -*- lexical-binding: t; -*-</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Copyright (C) 2021  Jeet Ray</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Author: Jeet Ray <a href="mailto:aiern%40protonmail.com">&lt;aiern@protonmail.com&gt;</a></span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Keywords: lisp</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Version: 0.0.1</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This program is free software; you can redistribute it and/or modify</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">it under the terms of the GNU alloy Public License as published by</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">the Free Software Foundation, either version 3 of the License, or</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(at your option) any later version.</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This program is distributed in the hope that it will be useful,</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">GNU alloy Public License for more details.</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">You should have received a copy of the GNU alloy Public License</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">along with this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">Commentary:</span>

<span style="font-weight: bold; font-style: italic;">;; </span>

<span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">Code:</span>

(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">naked</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">thingatpt</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">f</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">s</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">dash</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">key-chord</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">uuidgen</span>)

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/modal-modes</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/ignored-modal-modes</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/modal-prefixes</span> (mapcar (<span style="font-weight: bold;">lambda</span> (mode) (<span style="font-weight: bold;">interactive</span>)
    (car (split-string (symbol-name mode) <span style="font-style: italic;">"-"</span>))) <span style="font-weight: bold;">meq/var/modal-modes))</span>
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/ignored-modal-prefixes</span> (mapcar (<span style="font-weight: bold;">lambda</span> (mode) (<span style="font-weight: bold;">interactive</span>)
    (car (split-string (symbol-name mode) <span style="font-style: italic;">"-"</span>))) <span style="font-weight: bold;">meq/var/ignored-modal-modes))</span>
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/last-global-map</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/which-key-really-dont-show</span> t)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/last-evil-state</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/last-aiern-state</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/backup-modal-modes</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/backup-terminal-local-map</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/all-modal-modes-off</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/last-buffer</span> nil)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/which-key-first-show</span> t)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">meq/var/tab-size-in-spaces</span> 4)

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ued</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (f-full (apply #'f-join user-emacs-directory args)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ued-lib</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (f-full (apply #'meq/ued <span style="font-style: italic;">"lib"</span> args)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ued-siluam</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (f-full (apply #'meq/ued <span style="font-style: italic;">"siluam"</span> args)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ued-profiles</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (f-full (apply #'meq/ued <span style="font-style: italic;">"profiles"</span> args)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ued-bundle</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (f-full (apply #'meq/ued <span style="font-style: italic;">"bundle"</span> args)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ued-local</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (f-full (apply #'meq/ued <span style="font-style: italic;">".local"</span> args)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/cl</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args)
    (<span style="font-weight: bold;">let*</span> ((path (<span style="font-weight: bold;">if</span> (f-exists? (car args)) (car args) (apply #'meq/ued args)))
            (path-exists (f-exists? path))
            (org-file* (<span style="font-weight: bold;">when</span> path-exists (f-ext path)))
            (org-file (<span style="font-weight: bold;">and</span> org-file* (string= org-file* <span style="font-style: italic;">"org"</span>))))
        (<span style="font-weight: bold;">when</span> path-exists
            (<span style="font-weight: bold;">if</span> org-file (org-babel-load-file path t) (load path)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/load-emacs-file</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> files) (mapc #'(<span style="font-weight: bold;">lambda</span> (file) (<span style="font-weight: bold;">interactive</span>) (load (meq/ued-lib file))) files))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/load-siluam-file</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> files) (mapc #'(<span style="font-weight: bold;">lambda</span> (file) (<span style="font-weight: bold;">interactive</span>) (load (meq/ued-siluam file))) files))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/timestamp</span> nil (<span style="font-weight: bold;">interactive</span>) (format-time-string <span style="font-style: italic;">"%Y%m%d%H%M%S%N"</span>))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/uuid</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>) (apply (intern (concat <span style="font-style: italic;">"uuidgen-"</span> (<span style="font-weight: bold;">or</span> (car args) <span style="font-style: italic;">"5"</span>)))
                                                  (<span style="font-weight: bold;">or</span> (cdr args) (list (uuidgen-4) (uuidgen-4)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/named-uuid</span> (name) (<span style="font-weight: bold;">interactive</span>) (meq/uuid <span style="font-style: italic;">"5"</span> (meq/uuid) name))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/pget</span> (item plist) (<span style="font-weight: bold;">or</span> (<span style="font-weight: bold;">ignore-error</span> (plist-get plist item)) (cl-getf plist item)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/basename</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> file) (<span style="font-weight: bold;">interactive</span>) (car (split-string (file-name-base (<span style="font-weight: bold;">or</span> file buffer-file-name)) <span style="font-style: italic;">"\\."</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://emacsredux.com/blog/2019/01/10/convert-a-keyword-to-a-symbol/</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/keyword-to-symbol-name</span> (keyword) (<span style="font-weight: bold;">interactive</span>)
  <span style="font-style: italic;">"Convert KEYWORD to symbol."</span>
  (substring (symbol-name keyword) 1))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/inconcat</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> strings) (intern (apply #'concat strings)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/a/10088995/10827766</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/324105/phils</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/fbatp</span> (mode) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let*</span> ((is-it-bound (boundp mode)))
        (<span style="font-weight: bold;">when</span> is-it-bound (<span style="font-weight: bold;">and</span>
            (eval `(<span style="font-weight: bold;">bound-and-true-p</span> ,mode))
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(or (fboundp mode) (functionp mode))</span>
            ) <span style="font-weight: bold;">mode)))</span>

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/ncp</span> nil (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">and</span> (meq/fbatp 'native-comp-available-p) (native-comp-available-p)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/listtp</span> (list*) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">and</span> list* (<span style="font-weight: bold;">or</span> (consp list*) (listp list*))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://www.reddit.com/r/emacs/comments/ahcmi7/exwm_variable_to_detect_if_it_is_being_used/eedfhs0?utm_source=share&amp;utm_medium=web2x&amp;context=3</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/exwm-p</span> nil (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">exwm</span>) (frame-parameter (selected-frame) 'exwm-active)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/xwinp</span> nil (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">exwm</span>) (derived-mode-p 'exwm-mode)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/windows-p</span> nil (<span style="font-weight: bold;">interactive</span>) (member system-type '(windows-nt ms-dos)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://kitchingroup.cheme.cmu.edu/blog/2015/03/19/Restarting-org-babel-sessions-in-org-mode-more-effectively/</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-restart-session-to-point</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> arg)
  <span style="font-style: italic;">"Restart session up to the src-block in the current point.</span>
<span style="font-style: italic;">Goes to beginning of buffer and executes each code block with</span>
<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-babel-execute-src-block</span><span style="font-style: italic;">' that has the same language and</span>
<span style="font-style: italic;">session as the current block. ARG has same meaning as in</span>
<span style="font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-babel-execute-src-block</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>) (not (org-in-src-block-p)))
    (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"You must be in a src-block to run this command"</span>))
  (<span style="font-weight: bold;">let*</span> ((current-point (point-marker))
         (info (org-babel-get-src-block-info))
         (lang (nth 0 info))
         (params (nth 2 info))
         (session (cdr (assoc <span style="font-weight: bold;">:session</span> params))))
    (<span style="font-weight: bold;">save-excursion</span>
      (goto-char (point-min))
      (<span style="font-weight: bold;">while</span> (re-search-forward org-babel-src-block-regexp nil t)
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">goto start of block</span>
        (goto-char (match-beginning 0))
        (<span style="font-weight: bold;">let*</span> ((this-info (org-babel-get-src-block-info))
               (this-lang (nth 0 this-info))
               (this-params (nth 2 this-info))
               (this-session (cdr (assoc <span style="font-weight: bold;">:session</span> this-params))))
            (<span style="font-weight: bold;">when</span>
                (<span style="font-weight: bold;">and</span>
                 (&lt; (point) (marker-position current-point))
                 (string= lang this-lang)
                 (src-block-in-session-p session))
              (org-babel-execute-src-block arg)))
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">move forward so we can find the next block</span>
        (forward-line)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://kitchingroup.cheme.cmu.edu/blog/2015/03/19/Restarting-org-babel-sessions-in-org-mode-more-effectively/</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-kill-session</span> nil
  <span style="font-style: italic;">"Kill session for current code block."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>) (not (org-in-src-block-p)))
    (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"You must be in a src-block to run this command"</span>))
  (<span style="font-weight: bold;">save-window-excursion</span>
    (org-babel-switch-to-session)
    (kill-buffer)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://kitchingroup.cheme.cmu.edu/blog/2015/03/19/Restarting-org-babel-sessions-in-org-mode-more-effectively/</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-remove-result-buffer</span> nil
  <span style="font-style: italic;">"Remove results from every code block in buffer."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
    (<span style="font-weight: bold;">save-excursion</span>
      (goto-char (point-min))
      (<span style="font-weight: bold;">while</span> (re-search-forward org-babel-src-block-regexp nil t)
        (org-babel-remove-result)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/26840/31428</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/253/dan</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">And: https://emacsredux.com/blog/2020/06/14/checking-the-major-mode-in-emacs-lisp/</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/outline-on-heading-p</span> nil
    <span style="font-style: italic;">"Returns non-nil if point is on a headline."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">if</span> (derived-mode-p 'org-mode)
        (<span style="font-weight: bold;">or</span> (outline-on-heading-p)

            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">From: https://github.com/bzg/org-mode/blob/edddc7d149b8668a830443b12db14075beb28607/lisp/org.el#L20744</span>
            (org-at-heading-p))

        (outline-on-heading-p)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">From: https://github.com/bzg/org-mode/blob/edddc7d149b8668a830443b12db14075beb28607/lisp/org.el#L12889            </span>
(<span style="font-weight: bold;">unless</span> (fboundp 'org-at-property-drawer-p)
    (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">org-at-property-drawer-p</span> ()
  <span style="font-style: italic;">"Non-nil when point is at the first line of a property drawer."</span>
  (<span style="font-weight: bold;">org-with-wide-buffer</span>
   (beginning-of-line)
   (<span style="font-weight: bold;">and</span> (looking-at org-property-drawer-re)
        (<span style="font-weight: bold;">or</span> (bobp)
            (<span style="font-weight: bold;">progn</span>
              (forward-line -1)
              (<span style="font-weight: bold;">cond</span> ((org-at-heading-p))
                    ((looking-at org-planning-line-re)
                     (forward-line -1)
                     (org-at-heading-p))
                    ((looking-at org-comment-regexp)
                     (forward-line -1)
                     (<span style="font-weight: bold;">while</span> (<span style="font-weight: bold;">and</span> (not (bobp)) (looking-at org-comment-regexp))
                       (forward-line -1))
                     (looking-at org-comment-regexp))
                    (t nil))))))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/26840/31428</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/253/dan</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">And: https://emacsredux.com/blog/2020/06/14/checking-the-major-mode-in-emacs-lisp/</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/foldable-p</span> nil
    <span style="font-style: italic;">"Returns non-nil if point can fold."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">or</span> (meq/outline-on-heading-p)

        (<span style="font-weight: bold;">when</span> (derived-mode-p 'org-mode) (<span style="font-weight: bold;">or</span> (org-at-property-drawer-p)

            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">From: https://github.com/bzg/org-mode/blob/edddc7d149b8668a830443b12db14075beb28607/lisp/org.el#L20809</span>
            (org-at-drawer-p)

            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">From: https://github.com/bzg/org-mode/blob/edddc7d149b8668a830443b12db14075beb28607/lisp/org.el#L20815</span>
            (org-at-block-p)))

        (invisible-p (point-at-eol))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/bzg/org-mode/blob/main/lisp/org-id.el#L275</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-custom-id-get</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> pom create prefix)
  <span style="font-style: italic;">"Get the CUSTOM_ID property of the entry at point-or-marker POM.</span>
<span style="font-style: italic;">If POM is nil, refer to the entry at point.</span>
<span style="font-style: italic;">If the entry does not have an CUSTOM_ID, the function returns nil.</span>
<span style="font-style: italic;">However, when CREATE is non-nil, create an CUSTOM_ID if none is present already.</span>
<span style="font-style: italic;">PREFIX will be passed through to `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-id-new</span><span style="font-style: italic;">'.</span>
<span style="font-style: italic;">In any case, the CUSTOM_ID of the entry is returned."</span>
  (<span style="font-weight: bold;">org-with-point-at</span> pom
    (<span style="font-weight: bold;">let</span> ((custom-id (org-entry-get nil <span style="font-style: italic;">"CUSTOM_ID"</span>)))
      (<span style="font-weight: bold;">cond</span>
       ((<span style="font-weight: bold;">and</span> custom-id (stringp custom-id) (string-match <span style="font-style: italic;">"\\S-"</span> custom-id))
        custom-id)
       (create
        (<span style="font-weight: bold;">setq</span> custom-id (org-id-new prefix))
        (org-entry-put pom <span style="font-style: italic;">"CUSTOM_ID"</span> custom-id)
        custom-id)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/bzg/org-mode/blob/main/lisp/org-id.el#L253</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-custom-id-get-create</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> force)
  <span style="font-style: italic;">"Create an CUSTOM_ID for the current entry and return it.</span>
<span style="font-style: italic;">If the entry already has an CUSTOM_ID, just return it.</span>
<span style="font-style: italic;">With optional argument FORCE, force the creation of a new CUSTOM_ID."</span>
  (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
  (<span style="font-weight: bold;">when</span> force
    (org-entry-put (point) <span style="font-style: italic;">"CUSTOM_ID"</span> nil))
  (meq/org-custom-id-get (point) 'create))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/folded-p</span> nil <span style="font-style: italic;">"Returns non-nil if point is on a folded org object."</span> (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">and</span> (meq/foldable-p) (invisible-p (point-at-eol))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/unfolded-p</span> nil <span style="font-style: italic;">"Returns non-nil if point is on an unfolded org object."</span> (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">and</span> (meq/foldable-p) (not (invisible-p (point-at-eol)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/37791/31428</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/12497/toothrot</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/go-to-parent</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> steps) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">ignore-error</span> (outline-up-heading (<span style="font-weight: bold;">or</span> steps 0))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/a/27799515</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/850781/sds</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/prior-char</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> *point) (<span style="font-weight: bold;">interactive</span>) (char-syntax (<span style="font-weight: bold;">if</span> *point (char-before *point) (preceding-char))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/whitespace-before-p</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> *point) (<span style="font-weight: bold;">interactive</span>) (member (meq/prior-char *point) `(,(string-to-char <span style="font-style: italic;">" "</span>) ,(string-to-char <span style="font-style: italic;">"\t"</span>))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/newline-p</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> *point) (<span style="font-weight: bold;">interactive</span>) (member (meq/prior-char *point) `(,(string-to-char <span style="font-style: italic;">"\n"</span>))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/key-chord-p</span> (key-chord) (string= (<span style="font-weight: bold;">if</span> (listp key-chord) (car key-chord) key-chord) <span style="font-style: italic;">"&lt;key-chord&gt;"</span>))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/delete-while-white</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> *not) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">while</span> (<span style="font-weight: bold;">if</span> *not (not (meq/whitespace-before-p)) (meq/whitespace-before-p)) (delete-backward-char 1)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/delete-white-or-word</span> nil (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">cond</span>
    ((bolp) (delete-backward-char 1))
    ((meq/whitespace-before-p) (<span style="font-weight: bold;">if</span> (meq/whitespace-before-p (1- (point)))
                        (meq/delete-while-white)
                        (delete-backward-char 1)
                        (meq/delete-while-white t)))
    (t (meq/delete-while-white t))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/outline-cycle</span> (func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">if</span> (meq/folded-p)
    (<span style="font-weight: bold;">progn</span>
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(when (invisible-p (point)) (beginning-of-line) (when (invisible-p (point)) (while (invisible-p (point)) (backward-char))))</span>

        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://www.reddit.com/r/emacs/comments/rlxkjn/move_cursor_from_invisible_region_to_visible/</span>
        (<span style="font-weight: bold;">when</span> (invisible-p (point)) (<span style="font-weight: bold;">while</span> (invisible-p (1- (point))) (goto-char (previous-single-char-property-change (point) 'invisible))))
        
        (apply func args))
    (<span style="font-weight: bold;">if</span> (meq/outline-on-heading-p)
        (<span style="font-weight: bold;">cond</span>
            ((meq/fbatp aiern-mode) (aiern-close-fold))
            ((meq/fbatp evil-mode) (evil-close-fold))
            (t (outline-hide-subtree)))
        (<span style="font-weight: bold;">cond</span>
            ((meq/fbatp aiern-mode) (<span style="font-weight: bold;">if</span> (meq/foldable-p) (apply func args) (meq/go-to-parent) (aiern-close-fold)))
            ((meq/fbatp evil-mode) (<span style="font-weight: bold;">if</span> (meq/foldable-p) (apply func args) (meq/go-to-parent) (evil-close-fold)))
            (t (apply func args))))
    (message <span style="font-style: italic;">"FOLDED"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/54550</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/21533/jagrg</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/tab</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> tab-size-in-spaces) (insert (make-string (<span style="font-weight: bold;">or</span> tab-size-in-spaces meq/var/tab-size-in-spaces) ?\s)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/untab</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> tab-size-in-spaces) (<span style="font-weight: bold;">interactive</span>) (mapc
    #'(<span style="font-weight: bold;">lambda</span> (i) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">when</span> (meq/whitespace-before-p) (delete-backward-char 1)))
    (number-sequence 1 (<span style="font-weight: bold;">or</span> tab-size-in-spaces meq/var/tab-size-in-spaces))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/outline-indent</span> (untab) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">if</span> untab (meq/untab) (meq/tab)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/outline-cycle-indent</span> (untab func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let*</span> ((oci (<span style="font-weight: bold;">lambda</span> (untab func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">if</span> (meq/foldable-p) (apply #'meq/outline-cycle func args) (meq/outline-indent untab)))))
        (<span style="font-weight: bold;">cond</span>
            ((meq/fbatp aiern-mode) (<span style="font-weight: bold;">cond</span>
                ((member aiern-state '(normal visual)) (apply #'meq/outline-cycle func args))
                ((member aiern-state '(insert)) (meq/outline-indent untab))
                (t (apply oci untab func args))))
            ((meq/fbatp evil-mode) (<span style="font-weight: bold;">cond</span>
                ((member evil-state '(normal visual)) (apply #'meq/outline-cycle func args))
                ((member evil-state '(insert)) (meq/outline-indent untab))
                (t (apply oci untab func args))))
            (t (apply oci untab func args)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'org-cycle <span style="font-weight: bold;">:around</span> #'(<span style="font-weight: bold;">lambda</span> (func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>) (apply #'meq/outline-cycle-indent nil func args)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'org-shifttab <span style="font-weight: bold;">:around</span> #'(<span style="font-weight: bold;">lambda</span> (func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>) (apply #'meq/outline-cycle-indent t func args)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/questions/28098/how-to-change-org-mode-babel-tangle-write-to-file-way-as-append-instead-of-overr/38898#38898</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/2370/tobias</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-tangle-append</span> nil
    <span style="font-style: italic;">"Append source code block at point to its tangle file.</span>
<span style="font-style: italic;">    The command works like `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-babel-tangle</span><span style="font-style: italic;">' with prefix arg</span>
<span style="font-style: italic;">    but `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">delete-file</span><span style="font-style: italic;">' is ignored."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
        (<span style="font-weight: bold;">cl-letf</span> (((symbol-function 'delete-file) #'ignore))
            (org-babel-tangle '(4)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/questions/39032/tangle-the-same-src-block-to-different-files/39039#39039</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/2370/tobias</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-tangle-collect-blocks-handle-tangle-list</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> language tangle-file)
    <span style="font-style: italic;">"Can be used as :override advice for `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-babel-tangle-collect-blocks</span><span style="font-style: italic;">'.</span>
<span style="font-style: italic;">    Handles lists of :tangle files."</span>
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
        (<span style="font-weight: bold;">let</span> ((counter 0) last-heading-pos blocks)
            (<span style="font-weight: bold;">org-babel-map-src-blocks</span> (buffer-file-name)
            (<span style="font-weight: bold;">let</span> ((current-heading-pos
                (<span style="font-weight: bold;">org-with-wide-buffer</span>
                (<span style="font-weight: bold;">org-with-limited-levels</span> (outline-previous-heading)))))
            (<span style="font-weight: bold;">if</span> (eq last-heading-pos current-heading-pos) (<span style="font-weight: bold;">cl-incf</span> counter)
            (<span style="font-weight: bold;">setq</span> counter 1)
            (<span style="font-weight: bold;">setq</span> last-heading-pos current-heading-pos)))
            (<span style="font-weight: bold;">unless</span> (org-in-commented-heading-p)
            (<span style="font-weight: bold;">let*</span> ((info (org-babel-get-src-block-info 'light))
                (src-lang (nth 0 info))
                (src-tfiles (cdr (assq <span style="font-weight: bold;">:tangle</span> (nth 2 info))))) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Tobias: accept list for :tangle</span>
            (<span style="font-weight: bold;">unless</span> (consp src-tfiles) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Tobias: unify handling of strings and lists for :tangle</span>
                (<span style="font-weight: bold;">setq</span> src-tfiles (list src-tfiles))) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Tobias: unify handling</span>
            (<span style="font-weight: bold;">dolist</span> (src-tfile src-tfiles) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Tobias: iterate over list</span>
                (<span style="font-weight: bold;">unless</span> (<span style="font-weight: bold;">or</span> (string= src-tfile <span style="font-style: italic;">"no"</span>)
                    (<span style="font-weight: bold;">and</span> tangle-file (not (equal tangle-file src-tfile)))
                    (<span style="font-weight: bold;">and</span> language (not (string= language src-lang))))
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Add the spec for this block to blocks under its</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">language.</span>
                (<span style="font-weight: bold;">let</span> ((by-lang (assoc src-lang blocks))
                    (block (org-babel-tangle-single-block counter)))
                (setcdr (assoc <span style="font-weight: bold;">:tangle</span> (nth 4 block)) src-tfile) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Tobias: </span>
                (<span style="font-weight: bold;">if</span> by-lang (setcdr by-lang (cons block (cdr by-lang)))
                (<span style="font-weight: bold;">push</span> (cons src-lang (list block)) blocks)))))))) <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Tobias: just ()</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Ensure blocks are in the correct order.</span>
            (mapcar (<span style="font-weight: bold;">lambda</span> (b) (cons (car b) (nreverse (cdr b)))) blocks))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/questions/39032/tangle-the-same-src-block-to-different-files/39039#39039</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/2370/tobias</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-tangle-single-block-handle-tangle-list</span> (oldfun block-counter <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> only-this-block)
    <span style="font-style: italic;">"Can be used as :around advice for `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-babel-tangle-single-block</span><span style="font-style: italic;">'.</span>
<span style="font-style: italic;">    If the :tangle header arg is a list of files. Handle all files"</span>
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
        (<span style="font-weight: bold;">let*</span> ((info (org-babel-get-src-block-info))
            (params (nth 2 info))
            (tfiles (cdr (assoc <span style="font-weight: bold;">:tangle</span> params))))
            (<span style="font-weight: bold;">if</span> (null (<span style="font-weight: bold;">and</span> only-this-block (consp tfiles)))
            (funcall oldfun block-counter only-this-block)
            (<span style="font-weight: bold;">cl-assert</span> (listp tfiles) nil
                <span style="font-style: italic;">":tangle only allows a tangle file name or a list of tangle file names"</span>)
            (<span style="font-weight: bold;">let</span> ((ret (mapcar
                (<span style="font-weight: bold;">lambda</span> (tfile)
                    (<span style="font-weight: bold;">let</span> (old-get-info)
                    (<span style="font-weight: bold;">cl-letf*</span> (((symbol-function 'old-get-info) (symbol-function 'org-babel-get-src-block-info))
                        ((symbol-function 'org-babel-get-src-block-info)
                        `(<span style="font-weight: bold;">lambda</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> get-info-args)
                            (<span style="font-weight: bold;">let*</span> ((info (apply 'old-get-info get-info-args))
                                (params (nth 2 info))
                                (tfile-cons (assoc <span style="font-weight: bold;">:tangle</span> params)))
                            (setcdr tfile-cons ,tfile)
                            info))))
                    (funcall oldfun block-counter only-this-block))))
                tfiles)))
            (<span style="font-weight: bold;">if</span> only-this-block
                (list (cons (cl-caaar ret) (mapcar #'cadar ret)))
            ret))))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/get-tangled-file-name</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> file*) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">with-current-buffer</span> (get-file-buffer (<span style="font-weight: bold;">or</span> file* buffer-file-name))

        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/24521/31428</span>
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/12616/konstantin-morenko</span>
        (goto-line 1)

        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/15136/31428</span>
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/253/dan</span>
        (<span style="font-weight: bold;">let*</span> ((line (thing-at-point 'line))

                (split-line (split-string line <span style="font-style: italic;">":"</span>)))
            (f-full (cadr split-line)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-detangle-and-return</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> file* origin*) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
        (<span style="font-weight: bold;">save-current-buffer</span>
            (<span style="font-weight: bold;">let*</span> ((file (<span style="font-weight: bold;">or</span> file* buffer-file-name))
                    (origin-buffer (get-file-buffer (<span style="font-weight: bold;">or</span>
                                        origin*
                                        (meq/get-tangled-file-name file)))))
                (org-babel-detangle file)
                (<span style="font-weight: bold;">when</span> origin-buffer
                    (set-buffer origin-buffer)
                    (save-buffer)
                    (kill-buffer origin-buffer))

                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/a/44049569/10827766</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/2876504/alejandro-c</span>
                (delete-window (previous-window))))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/org-babel-detangle-kill-and-return</span> (file <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> origin) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let*</span> ((file-buffer (get-file-buffer file)))
        (meq/org-babel-detangle-and-return file origin)
        (<span style="font-weight: bold;">when</span> file-buffer (kill-buffer file-buffer))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/generate-obdar</span> (file <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> origin)
    (add-hook 'after-save-hook #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
        (<span style="font-weight: bold;">when</span> (eq (get-file-buffer file) (current-buffer))
            (meq/org-babel-detangle-and-return file origin)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/moff</span> (mode) (<span style="font-weight: bold;">if</span> (meq/fbatp mode) 0 1))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/after-init</span> nil (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">writeroom-mode</span>) (writeroom-mode (meq/moff writeroom-mode))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/src-mode-settings</span> nil (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>) (meq/disable-all-modal-modes) (meq/after-init)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/src-mode-exit</span> nil (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>) (meq/disable-all-modal-modes)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/syl20bnr/spacemacs/issues/13058#issuecomment-565741009</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;;;###autoload</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(advice-add #'org-edit-src-exit :after #'meq/src-mode-exit)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;;;###autoload</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(advice-add #'org-edit-src-abort :after #'meq/src-mode-exit)</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'org-edit-special <span style="font-weight: bold;">:after</span> #'meq/src-mode-settings)
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'org-babel-tangle-collect-blocks <span style="font-weight: bold;">:override</span> #'meq/org-babel-tangle-collect-blocks-handle-tangle-list)
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'org-babel-tangle-single-block <span style="font-weight: bold;">:around</span> #'meq/org-babel-tangle-single-block-handle-tangle-list)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: http://endlessparentheses.com/emacs-narrow-or-widen-dwim.html</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/narrow-or-widen-dwim</span> (p)
    <span style="font-style: italic;">"Widen if buffer is narrowed, narrow-dwim otherwise.</span>
<span style="font-style: italic;">    Dwim means: region, org-src-block, org-subtree, or</span>
<span style="font-style: italic;">    defun, whichever applies first. Narrowing to</span>
<span style="font-style: italic;">    org-src-block actually calls `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-edit-src-code</span><span style="font-style: italic;">'.</span>

<span style="font-style: italic;">    With prefix P, don't widen, just narrow even if buffer</span>
<span style="font-style: italic;">    is already narrowed."</span>
    (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"P"</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">org</span>)
        (<span style="font-weight: bold;">declare</span> (interactive-only))
        (<span style="font-weight: bold;">cond</span> ((<span style="font-weight: bold;">and</span> (buffer-narrowed-p) (not p)) (widen))
                ((region-active-p)
                (narrow-to-region (region-beginning)
                                (region-end)))
                ((derived-mode-p 'org-mode)
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">org-edit-src-code</span><span style="font-weight: bold; font-style: italic;">' is not a real narrowing</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">command. Remove this first conditional if</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">you don't want it.</span>
                (<span style="font-weight: bold;">cond</span> ((<span style="font-weight: bold;">ignore-errors</span> (org-edit-src-code) t)
                        (delete-other-windows))
                    ((<span style="font-weight: bold;">ignore-errors</span> (org-narrow-to-block) t))
                    (t (org-narrow-to-subtree))))
                ((derived-mode-p 'latex-mode)
                (LaTeX-narrow-to-environment))
                (t (narrow-to-defun)))
            (meq/src-mode-settings)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/add-to-ignored-modal-modes</span> (**mode <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let*</span> ((*mode (symbol-name **mode))
            (mode (meq/inconcat *mode <span style="font-style: italic;">"-mode"</span>)))
        (eval `(<span style="font-weight: bold;">progn</span> ,@args))
        (<span style="font-weight: bold;">push</span> mode meq/var/ignored-modal-modes)
        (<span style="font-weight: bold;">push</span> *mode meq/var/ignored-modal-prefixes)
        (funcall mode 1)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/42240</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: user12563</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/disable-all-modal-modes</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> keymap include-ignored) (<span style="font-weight: bold;">interactive</span>)
    (mapc
        #'(<span style="font-weight: bold;">lambda</span> (mode-symbol)
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">some symbols are functions which aren't normal mode functions</span>
            (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span>
                    (meq/fbatp mode-symbol)
                    (not (member mode-symbol meq/var/ignored-modal-modes)))
                (message (format <span style="font-style: italic;">"Disabling %s"</span> (symbol-name mode-symbol)))
                (<span style="font-weight: bold;">ignore-errors</span>
                    (funcall mode-symbol -1))))
            meq/var/modal-modes)
    (mapc
        #'(<span style="font-weight: bold;">lambda</span> (mode-symbol)
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">some symbols are functions which aren't normal mode functions</span>
            (<span style="font-weight: bold;">when</span> (meq/fbatp mode-symbol)
                (<span style="font-weight: bold;">if</span> include-ignored
                    (<span style="font-weight: bold;">progn</span>
                        (message (format <span style="font-style: italic;">"Disabling %s"</span> (symbol-name mode-symbol)))
                        (<span style="font-weight: bold;">ignore-errors</span> (funcall mode-symbol -1)))
                    (message (format <span style="font-style: italic;">"Enabling %s"</span> (symbol-name mode-symbol)))
                    (<span style="font-weight: bold;">ignore-errors</span> (funcall mode-symbol 1)))))
            meq/var/ignored-modal-modes)
    (<span style="font-weight: bold;">when</span> include-ignored (<span style="font-weight: bold;">setq</span> meq/var/all-modal-modes-off t))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">cosmoem</span>) (cosmoem-hide-all-modal-modes keymap include-ignored)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://superuser.com/a/331662/1154755</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://superuser.com/users/656734/phimuemue</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/end-of-line-and-indented-new-line</span> nil (<span style="font-weight: bold;">interactive</span>) (end-of-line) (newline-and-indent))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/questions/12997/how-do-i-use-nadvice/14827#14827</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/2308/kdb</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key--hide-popup</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> force dont-disable-modal-modes) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let*</span> ((popup-was-up (which-key--popup-showing-p)))
        (<span style="font-weight: bold;">when</span> force (<span style="font-weight: bold;">setq</span> meq/var/which-key-really-dont-show t))
        (<span style="font-weight: bold;">unless</span> dont-disable-modal-modes (meq/disable-all-modal-modes))
        (<span style="font-weight: bold;">setq</span> which-key-persistent-popup nil)
        (which-key--hide-popup)
        (which-key-mode -1)
        (<span style="font-weight: bold;">when</span> meq/var/which-key-first-show
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/a/44049569/10827766</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/2876504/alejandro-c</span>
            (<span style="font-weight: bold;">when</span> popup-was-up (delete-window (previous-window)))

            (<span style="font-weight: bold;">setq</span> meq/var/which-key-first-show nil))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://www.reddit.com/r/emacs/comments/3u0d0u/how_do_i_make_the_vertical_window_divider_more/cxb78ul?utm_source=share&amp;utm_medium=web2x&amp;context=3</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">More Information Here: https://www.gnu.org/software/emacs/manual/html_node/elisp/Display-Tables.html</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/window-divider</span> nil
  (<span style="font-weight: bold;">let</span> ((display-table (<span style="font-weight: bold;">or</span> buffer-display-table standard-display-table)))
    (<span style="font-weight: bold;">when</span> display-table (set-display-table-slot display-table 0 ? )
    (set-display-table-slot display-table 1 ? )
    (set-display-table-slot display-table 5 ? )
    (set-window-display-table (selected-window) display-table))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;;;###autoload</span>
(add-hook 'window-configuration-change-hook #'meq/window-divider)

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key--show-popup</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> keymap force disable-modal-modes) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let</span> ((show-popup #'(<span style="font-weight: bold;">lambda</span> (keymap) (<span style="font-weight: bold;">interactive</span>)
            (which-key-mode 1)
            (<span style="font-weight: bold;">setq</span> which-key-persistent-popup t)
            (<span style="font-weight: bold;">if</span> disable-modal-modes
                (meq/disable-all-modal-modes keymap)
                (meq/which-key-show-top-level keymap)))))
        (<span style="font-weight: bold;">if</span> meq/var/which-key-really-dont-show
            (<span style="font-weight: bold;">when</span> force (<span style="font-weight: bold;">setq</span> meq/var/which-key-really-dont-show nil) (funcall show-popup keymap))
            (funcall show-popup keymap))
        (<span style="font-weight: bold;">setq</span> meq/var/all-keymaps-map nil)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'aiern (mapc #'(<span style="font-weight: bold;">lambda</span> (state) (<span style="font-weight: bold;">interactive</span>)
    (add-hook (meq/inconcat <span style="font-style: italic;">"aiern-"</span> (symbol-name (car state)) <span style="font-style: italic;">"-state-entry-hook"</span>)
        #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
            (meq/which-key--show-popup (meq/inconcat <span style="font-style: italic;">"aiern-"</span> (symbol-name (car state)) <span style="font-style: italic;">"-state-map"</span>))))
    (add-hook (meq/inconcat <span style="font-style: italic;">"aiern-"</span> (symbol-name (car state)) <span style="font-style: italic;">"-state-exit-hook"</span>)
        #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
            (meq/which-key--show-popup)))
    (add-hook (meq/inconcat <span style="font-style: italic;">"evil-"</span> (symbol-name (car state)) <span style="font-style: italic;">"-state-entry-hook"</span>)
        #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
            (meq/which-key--show-popup (meq/inconcat <span style="font-style: italic;">"evil-"</span> (symbol-name (car state)) <span style="font-style: italic;">"-state-map"</span>))))
    (add-hook (meq/inconcat <span style="font-style: italic;">"evil-"</span> (symbol-name (car state)) <span style="font-style: italic;">"-state-exit-hook"</span>)
        #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
            (meq/which-key--show-popup))))
    aiern-state-properties))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key--refresh-popup</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> keymap) (<span style="font-weight: bold;">interactive</span>)
    (meq/which-key--hide-popup t)
    (meq/which-key--show-popup keymap t))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/toggle-which-key</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> keymap) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">if</span> (cosmoem-any-popup-showing-p)
        (meq/which-key--hide-popup t)
        (meq/which-key--show-popup keymap t)
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(meq/which-key-show-top-level keymap)</span>
        ))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key-show-top-level</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> keymap) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let*</span> ((current-map (<span style="font-weight: bold;">or</span> (symbol-value keymap) (<span style="font-weight: bold;">or</span> overriding-terminal-local-map global-map)))
        (which-key-function
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">#'which-key-show-top-level</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">#'(lambda nil (interactive) (which-key-show-full-keymap 'global-map))</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">#'which-key-show-full-major-mode</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">#'which-key-show-major-mode</span>

            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">https://github.com/justbur/emacs-which-key/blob/master/which-key.el#L2359</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">https://github.com/justbur/emacs-which-key/blob/master/which-key.el#L2666</span>
            #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
                (<span style="font-weight: bold;">when</span> which-key-persistent-popup (which-key--create-buffer-and-show nil current-map nil <span style="font-style: italic;">"Current bindings"</span>)))))
        (<span style="font-weight: bold;">if</span> (which-key--popup-showing-p)
            (<span style="font-weight: bold;">when</span> keymap (funcall which-key-function))
            (funcall which-key-function))
        (<span style="font-weight: bold;">setq</span> meq/var/current-top-level-map nil)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/justbur/emacs-which-key/blob/master/which-key.el#L1766</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">which-key--get-keymap-bindings-advice</span>
    (keymap <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> start prefix filter all evil aiern)
  <span style="font-style: italic;">"Retrieve top-level bindings from KEYMAP.</span>
<span style="font-style: italic;">PREFIX limits bindings to those starting with this key</span>
<span style="font-style: italic;">sequence. START is a list of existing bindings to add to.  If ALL</span>
<span style="font-style: italic;">is non-nil, recursively retrieve all bindings below PREFIX. If</span>
<span style="font-style: italic;">EVIL is non-nil, extract active evil bidings; if AIERN is non-nil,</span>
<span style="font-style: italic;">extract active aiern bidings."</span>
  (<span style="font-weight: bold;">let</span> ((bindings start)
        (ignore '(self-insert-command ignore ignore-event company-ignore))
        (evil-map
         (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> evil (<span style="font-weight: bold;">bound-and-true-p</span> evil-local-mode))
           (lookup-key keymap (kbd (format <span style="font-style: italic;">"&lt;%s-state&gt;"</span> evil-state)))))
        (aiern-map
         (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> aiern (<span style="font-weight: bold;">bound-and-true-p</span> aiern-local-mode))
           (lookup-key keymap (kbd (format <span style="font-style: italic;">"&lt;%s-state&gt;"</span> aiern-state))))))
    (<span style="font-weight: bold;">when</span> (keymapp evil-map)
      (<span style="font-weight: bold;">setq</span> bindings (which-key--get-keymap-bindings-1
                      evil-map bindings prefix filter all ignore)))
    (<span style="font-weight: bold;">when</span> (keymapp aiern-map)
      (<span style="font-weight: bold;">setq</span> bindings (which-key--get-keymap-bindings-1
                      aiern-map bindings prefix filter all ignore)))
    (which-key--get-keymap-bindings-1
     keymap bindings prefix filter all ignore)))

(advice-add #'which-key--get-keymap-bindings <span style="font-weight: bold;">:override</span> #'which-key--get-keymap-bindings-advice)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/14956/31428</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/25/gilles-so-stop-being-evil</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(with-eval-after-load 'evil (defun meq/newline-and-indent-advice (func &amp;rest arguments)</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/newline-and-indent-advice</span> (func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> arguments)
    (<span style="font-weight: bold;">if</span> (window-minibuffer-p)
        (<span style="font-weight: bold;">cond</span>
            ((evil-ex-p) (evil-ex-execute (minibuffer-contents)))
            ((aiern-ex-p) (aiern-ex-execute (minibuffer-contents)))
            (t (<span style="font-weight: bold;">progn</span> (minibuffer-complete-and-exit) (minibuffer-complete-and-exit))))
        (apply func arguments)))
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">)</span>

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/current-modal-modes</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> include-ignored) (<span style="font-weight: bold;">interactive</span>)
    (-filter #'(<span style="font-weight: bold;">lambda</span> (mode) (<span style="font-weight: bold;">interactive</span>) (eval `(<span style="font-weight: bold;">bound-and-true-p</span> ,mode)))
        (append (<span style="font-weight: bold;">when</span> include-ignored meq/var/ignored-modal-modes) meq/var/modal-modes)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/a/14490054/10827766</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/1600898/user4815162342</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/keymap-symbol</span> (keymap)
    <span style="font-style: italic;">"Return the symbol to which KEYMAP is bound, or nil if no such symbol exists."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">catch</span> '<span style="font-weight: bold; text-decoration: underline;">gotit</span>
        (mapatoms (<span style="font-weight: bold;">lambda</span> (sym)
            (<span style="font-weight: bold;">and</span> (boundp sym)
                (eq (symbol-value sym) keymap)
                (not (eq sym 'keymap))
                (<span style="font-weight: bold;">throw</span> '<span style="font-weight: bold; text-decoration: underline;">gotit</span> sym))))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/pre-post-command-hook-command</span> nil (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (window-minibuffer-p)
      (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">alloy</span>)
        (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">or</span> (derived-mode-p 'prog-mode)
                (derived-mode-p 'text-mode))
          (<span style="font-weight: bold;">unless</span> (lookup-key
                      alloy-override-mode-map
                      (naked <span style="font-style: italic;">"RET"</span>))
                        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key alloy-override-mode-map (naked "RET") 'newline-and-indent))</span>
                        (alloy-define-key <span style="font-weight: bold;">:keymaps</span> 'override <span style="font-style: italic;">"RET"</span> 'newline-and-indent))
          (<span style="font-weight: bold;">when</span> (lookup-key
                  alloy-override-mode-map
                  (naked <span style="font-style: italic;">"RET"</span>))
                    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(define-key alloy-override-mode-map (naked "RET") nil)</span>
                    (alloy-define-key <span style="font-weight: bold;">:keymaps</span> 'override <span style="font-style: italic;">"RET"</span> nil)
                  ))))
    (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">or</span>
            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(meq/xwinp)</span>
            (derived-mode-p 'vterm-mode))
        (<span style="font-weight: bold;">unless</span> meq/var/all-modal-modes-off
            (<span style="font-weight: bold;">setq</span> meq/var/backup-modal-modes (meq/current-modal-modes t)
                meq/var/backup-terminal-local-map overriding-terminal-local-map)
            (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">vterm</span>) (<span style="font-weight: bold;">setq</span> overriding-terminal-local-map vterm-mode-map))
            (meq/disable-all-modal-modes nil t))
        (<span style="font-weight: bold;">when</span> meq/var/all-modal-modes-off (mapc #'(<span style="font-weight: bold;">lambda</span> (mode) (<span style="font-weight: bold;">interactive</span>)
            (<span style="font-weight: bold;">when</span> (meq/fbatp mode) (<span style="font-weight: bold;">ignore-errors</span> (funcall mode 1)))) <span style="font-weight: bold;">meq/var/backup-modal-modes)</span>
            (<span style="font-weight: bold;">setq</span> meq/var/backup-modal-modes nil
                meq/var/all-modal-modes-off nil
                overriding-terminal-local-map meq/var/backup-terminal-local-map)))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">writeroom-mode</span>)
        (<span style="font-weight: bold;">unless</span> (<span style="font-weight: bold;">and</span> (meq/fbatp writeroom-mode) (<span style="font-weight: bold;">or</span>
                                                    lv-wnd
                                                    (window-minibuffer-p)
                                                    (which-key--popup-showing-p))) <span style="font-weight: bold;">(writeroom-mode 1)))</span>
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">olivetti</span>)
            (not (<span style="font-weight: bold;">or</span> (derived-mode-p 'dired-mode) (meq/xwinp) (meq/fbatp olivetti-mode))))
        (olivetti-mode 1))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">rainbow-identifiers</span>)
        (<span style="font-weight: bold;">unless</span> (meq/fbatp rainbow-identifiers-mode) (rainbow-identifiers-mode 1))
        (<span style="font-weight: bold;">setq</span> rainbow-identifiers-faces-to-override (face-list)))
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(when (meq/exwm-p) (if (or</span>
    <span style="font-weight: bold; font-style: italic;">;;                         </span><span style="font-weight: bold; font-style: italic;">(meq/current-modal-modes)</span>
    <span style="font-weight: bold; font-style: italic;">;;                         </span><span style="font-weight: bold; font-style: italic;">(not (meq/xwinp))</span>
    <span style="font-weight: bold; font-style: italic;">;;                         </span><span style="font-weight: bold; font-style: italic;">overriding-terminal-local-map</span>
    <span style="font-weight: bold; font-style: italic;">;;                         </span><span style="font-weight: bold; font-style: italic;">deino-curr-map</span>
    <span style="font-weight: bold; font-style: italic;">;;                         </span><span style="font-weight: bold; font-style: italic;">hydra-curr-map)</span>
    <span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(unless (eq exwm--input-mode 'line-mode) (exwm-input-grab-keyboard exwm--id))</span>
    <span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(unless (eq exwm--input-mode 'char-mode) (exwm-input-release-keyboard exwm--id))))</span>
        )
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(add-hook 'pre-command-hook 'meq/pre-post-command-hook-command)
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(add-hook 'post-command-hook 'meq/pre-post-command-hook-command)

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/evil-ex-advice</span> (func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> arguments)
    (meq/which-key--hide-popup nil t)
    (<span style="font-weight: bold;">setq</span> meq/var/last-global-map (current-global-map))
    (use-global-map global-map)

    (apply func arguments)

    (use-global-map meq/var/last-global-map)
    (<span style="font-weight: bold;">setq</span> meq/var/last-global-map nil)
    (meq/which-key--show-popup))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'aiern (advice-add #'aiern-ex <span style="font-weight: bold;">:around</span> #'meq/evil-ex-advice))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'evil (advice-add #'evil-ex <span style="font-weight: bold;">:around</span> #'meq/evil-ex-advice))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">From: https://github.com/hlissner/doom-emacs/blob/develop/core/core-keybinds.el#L83</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/doom/escape</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> interactive)
  <span style="font-style: italic;">"Run `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">doom-escape-hook</span><span style="font-style: italic;">'."</span>
  (<span style="font-weight: bold;">interactive</span> (list 'interactive))
  (<span style="font-weight: bold;">cond</span> ((minibuffer-window-active-p (minibuffer-window))
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">quit the minibuffer if open.</span>
         (<span style="font-weight: bold;">when</span> interactive
           (<span style="font-weight: bold;">setq</span> this-command 'abort-recursive-edit))
         (abort-recursive-edit))
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Run all escape hooks. If any returns non-nil, then stop there.</span>
        ((run-hook-with-args-until-success 'doom-escape-hook))
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">don't abort macros</span>
        ((<span style="font-weight: bold;">or</span> defining-kbd-macro executing-kbd-macro) nil)
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Back to the default</span>

        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO: Incorporate deino-keyboard-quit and hydra-keyboard-quit here</span>
        ((<span style="font-weight: bold;">unwind-protect</span> (keyboard-escape-quit)
           (<span style="font-weight: bold;">when</span> interactive
             (<span style="font-weight: bold;">setq</span> this-command 'keyboard-escape-quit))))))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'keyboard-quit <span style="font-weight: bold;">:override</span> #'meq/doom/escape)

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/M-x</span> nil (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">if</span> (window-minibuffer-p) (meq/doom/escape) (execute-extended-command nil)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/questions/24832699/emacs-24-untabify-on-save-for-everything-except-makefiles</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/2677392/ryan-m</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/untabify-everything</span> nil (untabify (point-min) (point-max)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/a/24857101/10827766</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://stackoverflow.com/users/936762/dan</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/untabify-except-makefiles</span> nil
  <span style="font-style: italic;">"Replace tabs with spaces except in makefiles."</span>
  (<span style="font-weight: bold;">unless</span> (derived-mode-p 'makefile-mode)
    (meq/untabify-everything)))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(add-hook 'before-save-hook 'meq/untabify-except-makefiles)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/emacsorphanage/god-mode/blob/master/god-mode.el#L454</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/god-prefix-command-p</span> nil
  <span style="font-style: italic;">"Return non-nil if the current command is a \"prefix\" command.</span>
<span style="font-style: italic;">This includes prefix arguments and any other command that should</span>
<span style="font-style: italic;">be ignored by `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">god-execute-with-current-bindings</span><span style="font-style: italic;">'."</span>
  (memq this-command '((<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">god-mode</span>) god-mode-self-insert)
                       digit-argument
                       negative-argument
                       universal-argument
                       universal-argument-more)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/hydra-force-disable</span> nil
    <span style="font-style: italic;">"Disable the current Hydra."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">hydra</span>)
        (<span style="font-weight: bold;">setq</span> hydra-deactivate nil)
        (remove-hook 'pre-command-hook 'hydra--clearfun)
        (<span style="font-weight: bold;">if</span> (fboundp 'remove-function)
                (<span style="font-weight: bold;">remove-function</span> input-method-function #'hydra--imf)
                (<span style="font-weight: bold;">when</span> hydra--input-method-function
                    (<span style="font-weight: bold;">setq</span> input-method-function hydra--input-method-function)
                    (<span style="font-weight: bold;">setq</span> hydra--input-method-function nil))))
        (<span style="font-weight: bold;">dolist</span> (frame (frame-list))
            (<span style="font-weight: bold;">with-selected-frame</span> frame
            (<span style="font-weight: bold;">when</span> overriding-terminal-local-map
                (internal-pop-keymap hydra-curr-map 'overriding-terminal-local-map))))
        (<span style="font-weight: bold;">setq</span> hydra-curr-map nil)
        (<span style="font-weight: bold;">when</span> hydra-curr-on-exit
            (<span style="font-weight: bold;">let</span> ((on-exit hydra-curr-on-exit))
            (<span style="font-weight: bold;">setq</span> hydra-curr-on-exit nil)
            (funcall on-exit))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://stackoverflow.com/questions/2580650/how-can-i-reload-emacs-after-changing-it/51781491#51781491</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: user4104817</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/reload-emacs</span> nil (<span style="font-weight: bold;">interactive</span>)
    (meq/reload-early-init)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">exwm</span>) (meq/exwm-p))
        (exwm-reset)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: http://whattheemacsd.com/file-defuns.el-01.html</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/rename-current-buffer-file</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> new-name*)
  <span style="font-style: italic;">"Renames current buffer and file it is visiting."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((name (buffer-name))
        (filename (buffer-file-name)))
    (<span style="font-weight: bold;">if</span> (not (<span style="font-weight: bold;">and</span> filename (file-exists-p filename)))
        (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"Buffer '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">%s</span><span style="font-style: italic;">' is not visiting a file!"</span> name)
      (<span style="font-weight: bold;">let</span> ((new-name (<span style="font-weight: bold;">or</span> new-name* (read-file-name <span style="font-style: italic;">"New name: "</span> filename))))
        (<span style="font-weight: bold;">if</span> (get-buffer new-name)
            (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"A buffer named '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">%s</span><span style="font-style: italic;">' already exists!"</span> new-name)
          (rename-file filename new-name 1)
          (rename-buffer new-name)
          (set-visited-file-name new-name)
          (set-buffer-modified-p nil)
          (message <span style="font-style: italic;">"File '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">%s</span><span style="font-style: italic;">' successfully renamed to '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">%s</span><span style="font-style: italic;">'"</span>
                   name (file-name-nondirectory new-name)))))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: http://whattheemacsd.com/file-defuns.el-02.html</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/delete-current-buffer-file</span> nil
  <span style="font-style: italic;">"Removes file connected to current buffer and kills buffer."</span>
  (<span style="font-weight: bold;">interactive</span>)
  (<span style="font-weight: bold;">let</span> ((filename (buffer-file-name))
        (buffer (current-buffer))
        (name (buffer-name)))
    (<span style="font-weight: bold;">if</span> (not (<span style="font-weight: bold;">and</span> filename (file-regular-p filename)))
        (ido-kill-buffer)
      (<span style="font-weight: bold;">when</span> (y-or-n-p <span style="font-style: italic;">"Are you sure you want to remove this file? "</span>)
        (delete-file filename)
        (kill-buffer buffer)
        (message <span style="font-style: italic;">"File '</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">%s</span><span style="font-style: italic;">' successfully removed"</span> filename)))))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/14861/31428</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: user227</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/substring</span> (substring* string) (string-match-p (regexp-quote substring*) string))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/remove-dot-dirs</span> (list*) (<span style="font-weight: bold;">interactive</span>) (<span style="font-weight: bold;">--remove</span> (<span style="font-weight: bold;">or</span> (string= <span style="font-style: italic;">"."</span> it) (string= <span style="font-style: italic;">".."</span> it)) list*))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/ch11ng/exwm/blob/master/exwm-config.el#L52</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/run</span> (command <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> name)
    (<span style="font-weight: bold;">when</span> (meq/exwm-p) (exwm-workspace-switch-create (1+ (exwm-workspace--count))))
    (start-process-shell-command (<span style="font-weight: bold;">or</span> name command) nil command)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (meq/exwm-p) exwm--floating-frame) (exwm-floating--unset-floating exwm--id)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/ch11ng/exwm/blob/master/exwm-config.el#L52</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/run-interactive</span> (command) (<span style="font-weight: bold;">interactive</span> (list (read-shell-command <span style="font-style: italic;">"$ "</span>)))
    (<span style="font-weight: bold;">when</span> (meq/exwm-p) (exwm-workspace-switch-create (1+ (exwm-workspace--count))))
    (start-process-shell-command command nil command)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (meq/exwm-p) exwm--floating-frame) (exwm-floating--unset-floating exwm--id)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;;;###autoload</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(defun meq/switch-to-buffer (buffer-or-name) (interactive)</span>
<span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(if (meq/exwm-p)</span>
<span style="font-weight: bold; font-style: italic;">;;         </span><span style="font-weight: bold; font-style: italic;">(exwm-workspace-switch-to-buffer buffer-or-name)</span>
<span style="font-weight: bold; font-style: italic;">;;         </span><span style="font-weight: bold; font-style: italic;">(switch-to-buffer buffer-or-name)))</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/ch11ng/exwm/blob/master/exwm-workspace.el#L978</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/switch-to-buffer-advice</span> (func <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args)
    <span style="font-style: italic;">"Make the current Emacs window display another buffer."</span>
    (<span style="font-weight: bold;">interactive</span>
    (<span style="font-weight: bold;">let</span> ((inhibit-quit t))
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Show all buffers</span>
        (<span style="font-weight: bold;">unless</span> exwm-workspace-show-all-buffers
        (<span style="font-weight: bold;">dolist</span> (pair exwm--id-buffer-alist)
            (<span style="font-weight: bold;">with-current-buffer</span> (cdr pair)
            (<span style="font-weight: bold;">when</span> (= ?\s (aref (buffer-name) 0))
                (<span style="font-weight: bold;">let</span> ((buffer-list-update-hook
                        (remq #'exwm-input--on-buffer-list-update
                            buffer-list-update-hook)))
                (rename-buffer (substring (buffer-name) 1)))))))
        (<span style="font-weight: bold;">prog1</span>
            (<span style="font-weight: bold;">with-local-quit</span>
            (list (get-buffer (read-buffer-to-switch <span style="font-style: italic;">"Switch to buffer: "</span>))))
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Hide buffers on other workspaces</span>
        (<span style="font-weight: bold;">unless</span> exwm-workspace-show-all-buffers
            (<span style="font-weight: bold;">dolist</span> (pair exwm--id-buffer-alist)
            (<span style="font-weight: bold;">with-current-buffer</span> (cdr pair)
                (<span style="font-weight: bold;">unless</span> (<span style="font-weight: bold;">or</span> (eq exwm--frame exwm-workspace--current)
                            (= ?\s (aref (buffer-name) 0)))
                (<span style="font-weight: bold;">let</span> ((buffer-list-update-hook
                        (remq #'exwm-input--on-buffer-list-update
                                buffer-list-update-hook)))
                    (rename-buffer (concat <span style="font-style: italic;">" "</span> (buffer-name)))))))))))
    (exwm--log)
    (<span style="font-weight: bold;">let*</span> ((buffer-or-name (car args))
            (norecord (cadr args))
            (force-same-window (caddr args)))
        (<span style="font-weight: bold;">when</span> buffer-or-name
            (<span style="font-weight: bold;">if</span> (get-buffer buffer-or-name) (<span style="font-weight: bold;">with-current-buffer</span> buffer-or-name
                (<span style="font-weight: bold;">if</span> (derived-mode-p 'exwm-mode)
                    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">EXWM buffer.</span>
                    (<span style="font-weight: bold;">if</span> (eq exwm--frame exwm-workspace--current)
                        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">On the current workspace.</span>
                        (<span style="font-weight: bold;">if</span> (not exwm--floating-frame)
                            (apply func args)
                            <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Select the floating frame.</span>
                            (select-frame-set-input-focus exwm--floating-frame)
                            (select-window (frame-root-window exwm--floating-frame)))
                        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">On another workspace.</span>
                        (<span style="font-weight: bold;">if</span> exwm-layout-show-all-buffers
                            (exwm-workspace-move-window exwm-workspace--current
                                                        exwm--id)
                        (<span style="font-weight: bold;">let</span> ((window (get-buffer-window buffer-or-name exwm--frame)))
                            (<span style="font-weight: bold;">if</span> window
                                (set-frame-parameter exwm--frame
                                                    'exwm-selected-window window)
                            (set-window-buffer (frame-selected-window exwm--frame)
                                                buffer-or-name)))
                        (exwm-workspace-switch exwm--frame)))
                    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Ordinary buffer.</span>
                    (apply func args))) <span style="font-weight: bold;">(apply func args)))))</span>

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'exwm (add-hook 'exwm-init-hook #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
                                                            (advice-add
                                                                #'switch-to-buffer
                                                                <span style="font-weight: bold;">:around</span>
                                                                #'meq/switch-to-buffer-advice))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/shell</span> nil (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">if</span> meq/var/last-buffer
        (<span style="font-weight: bold;">progn</span>
            (switch-to-buffer meq/var/last-buffer)
            (<span style="font-weight: bold;">setq</span> meq/var/last-buffer nil))
        (<span style="font-weight: bold;">setq</span> meq/var/last-buffer (buffer-name))
        (<span style="font-weight: bold;">if</span> (meq/exwm-p)
            (<span style="font-weight: bold;">if</span> (get-buffer <span style="font-style: italic;">"Alacritty"</span>) (switch-to-buffer <span style="font-style: italic;">"Alacritty"</span>) (meq/run <span style="font-style: italic;">"alacritty"</span>))
            (vterm))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/test</span> nil (<span style="font-weight: bold;">interactive</span>) (message (meq/timestamp)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key-change</span> (keymap key name <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> hook) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">with-eval-after-load</span> 'which-key
        (<span style="font-weight: bold;">let*</span> ((keys (split-string key <span style="font-style: italic;">" "</span>))
                (keymap-name (symbol-name (meq/keymap-symbol keymap)))
                (keymap-keyword (meq/inconcat <span style="font-style: italic;">":"</span> keymap-name))

                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/questions/30864/relocating-an-anonymous-prefix-keymap</span>
                <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/8528/ivan</span>
                (super-lookup (concat
                    (string-join (mapcar #'(<span style="font-weight: bold;">lambda</span> (key) (<span style="font-weight: bold;">interactive</span>) <span style="font-style: italic;">"(lookup-key"</span>) keys) <span style="font-style: italic;">" "</span>)
                    <span style="font-style: italic;">" "</span>
                    keymap-name
                    <span style="font-style: italic;">" "</span>
                    (string-join (mapcar #'(<span style="font-weight: bold;">lambda</span> (key) (<span style="font-weight: bold;">interactive</span>) (concat <span style="font-style: italic;">"\""</span> key <span style="font-style: italic;">"\""</span> <span style="font-style: italic;">")"</span>)) keys) <span style="font-style: italic;">" "</span>))))

            (add-hook (<span style="font-weight: bold;">or</span> hook 'after-init-hook) #'(<span style="font-weight: bold;">lambda</span> nil (<span style="font-weight: bold;">interactive</span>)
                (which-key-add-keymap-based-replacements keymap key (cons
                    name

                    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
                    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/questions/19877/how-to-evaluate-elisp-code-contained-in-a-string</span>
                    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/2355/constantine</span>
                    (eval (car (read-from-string (format <span style="font-style: italic;">"(progn %s)"</span> super-lookup)))))))))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key-change-ryo</span> (key name <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> hook) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">with-eval-after-load</span> 'ryo-modal
        (meq/which-key-change ryo-modal-mode-map key name hook)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(meq/which-key-change-ryo <span style="font-style: italic;">";"</span> <span style="font-style: italic;">"meq"</span>)

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/which-key-change-sorrow</span> (key name <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> hook) (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">with-eval-after-load</span> 'sorrow
        (meq/which-key-change sorrow-mode-map key name hook)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://www.reddit.com/r/emacs/comments/caifq4/package_updates_with_straight/et99epi?utm_source=share&amp;utm_medium=web2x&amp;context=3</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">And: https://github.com/raxod502/straight.el#updating-recipe-repositories</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/straight-upgrade</span> nil (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">straight</span>) (straight-pull-all)
    (straight-merge-all)
    (straight-freeze-versions))
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> (not (daemonp)) (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">restart-emacs</span>))
        (restart-emacs)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From:</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Answer: https://emacs.stackexchange.com/a/20122/31428</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">User: https://emacs.stackexchange.com/users/962/harald-hanche-olsen</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/with-ymm</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> args)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">yasnippet</span>) (yas-minor-mode 1) (eval `(<span style="font-weight: bold;">progn</span> ,@args)) (yas-minor-mode 0)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/insert-snippet</span> (name)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">yasnippet</span>) (eval `(meq/with-ymm (yas-expand-snippet (yas-lookup-snippet ,name))))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/get-next-in-list</span> (item list)
    (<span style="font-weight: bold;">let*</span> ((index (seq-position list item))
            (value (<span style="font-weight: bold;">when</span> index (nth (1+ index) list))))
        (<span style="font-weight: bold;">when</span> value (<span style="font-weight: bold;">unwind-protect</span> value (delete value list)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/get-next-in-cla</span> (item) (meq/get-next-in-list item command-line-args))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/item-in-list</span> (item list) (<span style="font-weight: bold;">unwind-protect</span> (member item list) (delete item list)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/item-in-cla</span> (item) (meq/item-in-list item command-line-args))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/two-items-in-list</span> (item list) (<span style="font-weight: bold;">unwind-protect</span> (<span style="font-weight: bold;">when</span> (member item list) (meq/get-next-in-list item list)) (delete item list)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/two-items-in-cla</span> (item) (meq/two-items-in-list item command-line-args))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/if-item-in-list</span> (item list <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (<span style="font-weight: bold;">let*</span> ((peabody* (<span style="font-weight: bold;">pop</span> body))
            (peabody (<span style="font-weight: bold;">if</span> (stringp peabody*) (list peabody*) peabody*)))
        (<span style="font-weight: bold;">if</span> (member item list)
            (<span style="font-weight: bold;">unwind-protect</span> (eval `(<span style="font-weight: bold;">progn</span> ,@peabody)) (delete item list))
            (eval `(<span style="font-weight: bold;">progn</span> ,@body)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/if-item-in-cla</span> (item <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body) (eval `(meq/if-item-in-list ,item ,command-line-args ,@body)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/if-two-items-in-list</span> (item list <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (<span style="font-weight: bold;">let*</span> ((value (meq/get-next-in-list item list))
            (peabody* (<span style="font-weight: bold;">pop</span> body))
            (return-peabody (<span style="font-weight: bold;">and</span> (booleanp peabody*) peabody*))
            (peabody (<span style="font-weight: bold;">if</span> (stringp peabody*) (list peabody*) peabody*)))
        (<span style="font-weight: bold;">if</span> (member item list)
            (<span style="font-weight: bold;">unwind-protect</span> (<span style="font-weight: bold;">if</span> return-peabody value (eval `(<span style="font-weight: bold;">progn</span> ,@peabody))) (delete item list))
            (eval `(<span style="font-weight: bold;">progn</span> ,@body)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/if-two-items-in-cla</span> (item <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (eval `(meq/if-two-items-in-list ,item ,command-line-args ,@body)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/when-item-in-list</span> (item list <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (<span style="font-weight: bold;">when</span> (member item list) (<span style="font-weight: bold;">unwind-protect</span> (eval `(<span style="font-weight: bold;">progn</span> ,@body)) (delete item list))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/when-item-in-cla</span> (item <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (eval `(meq/when-item-in-list ,item ,command-line-args ,@body)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/when-two-items-in-list</span> (item list return <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (<span style="font-weight: bold;">let*</span> ((value (meq/get-next-in-list item list)))
        (<span style="font-weight: bold;">when</span> (member item list) (<span style="font-weight: bold;">unwind-protect</span>
                                    (<span style="font-weight: bold;">if</span> return value (eval `(<span style="font-weight: bold;">progn</span> ,@body)))
                                    (delete item list)))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/when-two-items-in-cla</span> (item return <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (eval `(meq/when-two-items-in-list ,item ,command-line-args ,return ,@body)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/unless-item-in-list</span> (item list <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (<span style="font-weight: bold;">unless</span> (meq/item-in-list item list) (eval `(<span style="font-weight: bold;">progn</span> ,@body))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/unless-item-in-cla</span> (item <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (eval `(meq/unless-item-in-list ,item ,command-line-args ,@body)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/unless-two-items-in-list</span> (item list return <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (<span style="font-weight: bold;">let*</span> ((value (meq/get-next-in-list item list)))
        (<span style="font-weight: bold;">unless</span> (meq/item-in-list item list) (<span style="font-weight: bold;">if</span> return value (eval `(<span style="font-weight: bold;">progn</span> ,@body))))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defmacro</span> <span style="font-weight: bold;">meq/unless-two-items-in-cla</span> (item return <span style="font-weight: bold; text-decoration: underline;">&amp;rest</span> body)
    (eval `(meq/unless-two-items-in-list ,item ,command-line-args ,return ,@body)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/rs*</span> (item) (<span style="font-weight: bold;">if</span> (stringp item) item (symbol-name item)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/rs</span> (item <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> popstar)
    (<span style="font-weight: bold;">cond</span> ((meq/listtp item) (meq/rs* (<span style="font-weight: bold;">if</span> popstar (<span style="font-weight: bold;">pop</span> item) (car item))))
            (t (meq/rs* item))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/rl</span> (item) (<span style="font-weight: bold;">if</span> (meq/listtp item) item (list item)))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'aiern (<span style="font-weight: bold;">with-eval-after-load</span> 'evil (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/both-ex-define-cmd</span> (cmd function) (<span style="font-weight: bold;">interactive</span>)
    (evil-ex-define-cmd cmd function)
    (aiern-ex-define-cmd cmd function))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'counsel (advice-add #'counsel-M-x <span style="font-weight: bold;">:before</span> #'meq/which-key--hide-popup))
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">with-eval-after-load</span> 'helm
    (advice-add #'helm-smex-major-mode-commands <span style="font-weight: bold;">:before</span> #'meq/which-key--hide-popup)
    (advice-add #'helm-smex <span style="font-weight: bold;">:before</span> #'meq/which-key--hide-popup))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">;;;###autoload</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(advice-add #'execute-extended-command :before #'meq/which-key--hide-popup)</span>

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'keyboard-escape-quit <span style="font-weight: bold;">:after</span> #'meq/which-key--show-popup)
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'keyboard-quit <span style="font-weight: bold;">:after</span> #'meq/which-key--show-popup)
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(advice-add #'exit-minibuffer <span style="font-weight: bold;">:after</span> #'meq/which-key--show-popup)

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(add-hook 'after-init-hook 'key-chord-mode)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Adapted From: https://github.com/jojojames/dired-sidebar/blob/master/dired-sidebar.el#L670</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">And: https://github.com/jojojames/dired-sidebar/blob/master/dired-sidebar.el#L660</span>
<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/dired-sidebar-toggle</span> nil (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">featurep</span> '<span style="font-weight: bold; text-decoration: underline;">dired-sidebar</span>)
        (<span style="font-weight: bold;">if</span> (dired-sidebar-showing-sidebar-p)
            (<span style="font-weight: bold;">if</span> (equal (current-buffer) (dired-sidebar-buffer))
                (dired-sidebar-hide-sidebar)
                (dired-sidebar-jump-to-sidebar))
            (dired-sidebar-jump-to-sidebar))))

<span style="font-weight: bold; font-style: italic;">;;;</span><span style="font-weight: bold; font-style: italic;">###</span><span style="font-weight: bold; font-style: italic;">autoload</span>
(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">meq/backslash-toggle</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> ua) (<span style="font-weight: bold;">interactive</span> <span style="font-style: italic;">"p"</span>)
    (<span style="font-weight: bold;">if</span> current-prefix-arg
        (<span style="font-weight: bold;">cond</span> ((= ua 4) (meq/toggle-which-key)))
        (meq/dired-sidebar-toggle)))

(<span style="font-weight: bold;">provide</span> '<span style="font-weight: bold; text-decoration: underline;">meq</span>)
<span style="font-weight: bold; font-style: italic;">;;; </span><span style="font-weight: bold; font-style: italic;">meq.el ends here</span>
</code></pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Jeet Ray</p>
<p class="date">Created: 2023-09-05 Tue 00:49</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
